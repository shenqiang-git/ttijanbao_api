<?xml version="1.0" encoding="UTF-8"?>
<testcase id="weekReportLists" desc="学习周报列表">

    <afterSuit desc="测试后清除数据">
        <sql database="mmc_bigdata">
            DELETE FROM weekreports WHERE id IN (30,31);
        </sql>
    </afterSuit>

    <case id="weekReportLists_001" desc="列表有0条数据的情况" tag="normal">
        <print/>
        <sql database="mmc_bigdata">
            DELETE FROM weekreports WHERE uid=20008;
        </sql>
        <call service="weekReportLists">
            <param name="http-headers">{"Authorization":"$Authorization"}</param>
            <param>
            </param>
        </call>
        <print />
        <assert>
            <status>200</status>
            <body>
                <![CDATA[
                {
                    "code": 200,
                    "data": [],
                    "message": "请求成功"
                }

                ]]>
            </body>
        </assert>
    </case>

    <case id="weekReportLists_002" desc="列表有1条数据的情况" tag="normal">
        <print/>
        <sql database="mmc_bigdata">
            DELETE FROM weekreports WHERE uid=20008;

            INSERT INTO weekreports (`id`, `nickname`, `phone`, `subjectid`, `totaldays`, `totallessons`, `totalhours`, `totalquestions`, `uid`, `createTime`, `status`, `begin_time`, `end_time`, `sectionid`, `averageCorrect`, `mocktimes`, `sign`, `industryid`)
	            VALUES ('30', '我们', '15130585683', '3', '2', '5', '0.0', '200', '20008', '1570993203', '1', '2019-10-07', '2019-10-08', '1,5', '66', '4', '1', '1');
        </sql>
        <call service="weekReportLists">
            <param name="http-headers">{"Authorization":"$Authorization"}</param>
            <param>
            </param>
        </call>
        <print />
        <assert>
            <status>200</status>
            <body>
                <![CDATA[
                 {
                    "code": 200,
                    "data": [
                        {
                            "id": 30,
                            "begin_time": "10月7日",
                            "end_time": "10月8日",
                            "createTime": "2019.10.14 03:00",
                            "status": "1",
                            "sign": "1",
                            "param": "周报",
                            "title": "您上周的学习报告已出！快去看看AI老师的建议"
                        }
                    ],
                    "message": "请求成功"
                }
                ]]>
            </body>
        </assert>
    </case>

    <case id="weekReportLists_003" desc="列表有2条数据的情况" tag="normal">
        <print/>
        <sql database="mmc_bigdata">
            DELETE FROM weekreports WHERE uid=20008;

            INSERT INTO weekreports (`id`, `nickname`, `phone`, `subjectid`, `totaldays`, `totallessons`, `totalhours`, `totalquestions`, `uid`, `createTime`, `status`, `begin_time`, `end_time`, `sectionid`, `averageCorrect`, `mocktimes`, `sign`, `industryid`)
	            VALUES ('30', '我们', '15130585683', '3', '2', '5', '0.0', '200', '20008', '1570993203', '1', '2019-10-07', '2019-10-08', '1,5', '66', '4', '1', '1');
            INSERT INTO weekreports (`id`, `nickname`, `phone`, `subjectid`, `totaldays`, `totallessons`, `totalhours`, `totalquestions`, `uid`, `createTime`, `status`, `begin_time`, `end_time`, `sectionid`, `averageCorrect`, `mocktimes`, `sign`, `industryid`)
	            VALUES ('31', '我们', '15130585683', '3', '40', '6', '3.0', '200', '20008', '1570388400', '2', '2019-10-01', '2019-10-06', '1', '30', '5', '1', '1');
        </sql>
        <call service="weekReportLists">
            <param name="http-headers">{"Authorization":"$Authorization"}</param>
            <param>
            </param>
        </call>
        <print />
        <assert>
            <status>200</status>
            <body>
                <![CDATA[
                {
                    "code": 200,
                    "data": [
                        {
                            "id": 30,
                            "begin_time": "10月7日",
                            "end_time": "10月8日",
                            "createTime": "2019.10.14 03:00",
                            "status": "1",
                            "sign": "1",
                            "param": "周报",
                            "title": "您上周的学习报告已出！快去看看AI老师的建议"
                        },
                        {
                            "id": 31,
                            "begin_time": "10月1日",
                            "end_time": "10月6日",
                            "createTime": "2019.10.07 03:00",
                            "status": "2",
                            "sign": "1",
                            "param": "周报",
                            "title": "您上周的学习报告已出！快去看看AI老师的建议"
                        }
                    ],
                    "message": "请求成功"
                }
                ]]>
            </body>
        </assert>
    </case>

</testcase>