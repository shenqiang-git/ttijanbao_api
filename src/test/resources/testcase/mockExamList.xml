<?xml version="1.0" encoding="UTF-8"?>
<testcase id="mockExamList" desc="获取模拟/真题试卷列表">
    <backgrounds>
        <background id="background_mockExamList" desc="数据初始化">
            <sql database="mmc_bigdata">
                DELETE FROM testpapers WHERE id IN(20000101,20000102);
                INSERT INTO `mmc_bigdata`.`testpapers` (`id`, `papername`, `papername_alias`, `papertypeid`, `papernum`, `subjectid`, `totalnum`, `createtime`, `founder`, `paperprice`, `status`, `is_lock`, `is_autoload`, `testsource`, `testtype`, `taskid`, `is_sale`, `pid`, `provinceid`, `covers`, `sendtime`, `examlen`, `give_paper`, `is_real`, `chapterid`, `sectionid`, `xuekeid`, `shenhestatus`, `notpassreason`, `testid`, `testAssemblyType`, `showCont`, `nowprice`, `expectTime`, `giftId`, `shenheshijian`, `realquestionnum`, `provinceids`, `cityid`, `industryid`, `countryid`, `export_starttime`, `export_endtime`, `islive`, `init_paperid`, `year`, `xmxks`)
                    VALUES ('20000101', '接口测试真题试卷', '', '1', '0', '3', '0', '1571045999', '傅建文', '0', '2', '1', '2', '', '1', '0', '1', '-1', '0', '', '1571046188', '0', '0', '0', '0', '0', '0', '1', NULL, '0', '0', '100', '0.0', '0', '0', '2019-10-14 17:42:57', '0', '0', '0', '1', '0', '2019-10-14 17:37:26', '2019-10-14 17:37:28', '1', '0', '2018', '');
                INSERT INTO `mmc_bigdata`.`testpapers` (`id`, `papername`, `papername_alias`, `papertypeid`, `papernum`, `subjectid`, `totalnum`, `createtime`, `founder`, `paperprice`, `status`, `is_lock`, `is_autoload`, `testsource`, `testtype`, `taskid`, `is_sale`, `pid`, `provinceid`, `covers`, `sendtime`, `examlen`, `give_paper`, `is_real`, `chapterid`, `sectionid`, `xuekeid`, `shenhestatus`, `notpassreason`, `testid`, `testAssemblyType`, `showCont`, `nowprice`, `expectTime`, `giftId`, `shenheshijian`, `realquestionnum`, `provinceids`, `cityid`, `industryid`, `countryid`, `export_starttime`, `export_endtime`, `islive`, `init_paperid`, `year`, `xmxks`)
                    VALUES ('20000102', '接口测试模拟试卷', '', '2', '0', '3', '0', '1571045999', '傅建文', '0', '2', '1', '2', '', '1', '0', '1', '-1', '0', '', '1571046188', '0', '0', '0', '0', '0', '0', '1', NULL, '0', '0', '100', '0.0', '0', '0', '2019-10-14 17:42:57', '0', '0', '0', '1', '0', '2019-10-14 17:37:26', '2019-10-14 17:37:28', '1', '0', '2018', '');
            </sql>
        </background>
    </backgrounds>

    <afterSuit desc="测试后清除数据">
        <sql database="mmc_bigdata">
            DELETE FROM testpapers WHERE id IN(20000101,20000102);
        </sql>
    </afterSuit>

    <case id="mockExamList_001" desc="验证新建的真题试卷在列表中" tag="normal">
        <print/>
        <call service="mockExamList">
            <param name="http-headers">{"Authorization":"$Authorization"}</param>
            <param>
                {
                    "real": 1,
                    "subjectid": 3
                }
            </param>
        </call>
        <print />
        <assert>
            <status>200</status>
            <body>
                <![CDATA[
                    {
                        "code": 200,
                        "data": {
                            "list": hasItem("
                                {
                                    \"id\":20000101,
                                    \"papername\":\"接口测试真题试卷\",
                                    \"papernum\":0,
                                    \"taskid\":\"0\",
                                    \"is_lock\":2,
                                    \"paperprice\":\"0\",
                                    \"is_sale\":\"1\",
                                    \"realquestionnum\":\"0\"
                                }
                            "),
                            "share": {
                                "img": "http://huatu-yl-mmc.oss-cn-beijing.aliyuncs.com/appicon/question_share.png",
                                "title": "机考刷题  必过神器",
                                "link": "http://mmc-test.huatu.com/share/testquestions?userid=20008",
                                "content": "卫人机考最全的医疗行业模考app给您最真实的人机对话模考场景"
                            }
                        },
                        "message": "请求成功"
                    }
                ]]>
            </body>
        </assert>
    </case>

    <case id="mockExamList_002" desc="验证新建的模拟试卷在列表中" tag="normal">
        <print/>
        <call service="mockExamList">
            <param name="http-headers">{"Authorization":"$Authorization"}</param>
            <param>
                {
                    "mock": 1,
                    "subjectid": 3
                }
            </param>
        </call>
        <print />
        <assert>
            <status>200</status>
            <body>
                <![CDATA[
                    {
                        "code":200,
                        "data": {
                            "list":hasItem ("
                                {
                                    \"id\":20000102,
                                    \"papername\":\"模考29\",
                                    \"papernum\":0,
                                    \"taskid\": \"0\",
                                    \"is_lock\":2,
                                    \"paperprice\":\"0\",
                                    \"is_sale\":\"1\",
                                    \"realquestionnum\":\"0\"
                                }
                            "),
                            "share": {
                                "img": "http://huatu-yl-mmc.oss-cn-beijing.aliyuncs.com/appicon/question_share.png",
                                "title": "机考刷题  必过神器",
                                "link": "http://mmc-test.huatu.com/share/testquestions?userid=20008",
                                "content": "卫人机考最全的医疗行业模考app给您最真实的人机对话模考场景"
                            }
                        },
                        "message": "请求成功"
                    }
                ]]>
            </body>
        </assert>
    </case>

</testcase>
